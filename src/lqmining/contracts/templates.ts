import {ErgoTreeTemplate, HexString, RustModule} from "@ergolabs/ergo-sdk"
import * as crypto from "crypto-js"
import {toHex} from "../../utils/hex"

export const StakingBundleSample: ErgoTreeTemplate =
  "199e0312040004000404040404020400040005000402040204000400040205000404040005f" +
  "effffffffffffffff010100d80ed601b2a5730000d602db63087201d603e4c6a7060ed604b2" +
  "a4730100d605db63087204d6068cb2720573020002d607998cb27202730300027206d608e4c" +
  "6a7040ed609e4c6a7050ed60adb6308a7d60bb2720a730400d60cb2720a730500d60d8c720c" +
  "02d60e8c720b02d1ed938cb27202730600017203959372077307d808d60fb2a5e4e3000400d" +
  "610b2a5e4e3010400d611db63087210d612b27211730800d613b2e4c672040410730900d614" +
  "c672010804d6157e99721395e67214e47214e4c67201070405d616b2db6308720f730a00ede" +
  "d93c2720f7208ededededed93e4c67210040e720893e4c67210050e720993e4c67210060e72" +
  "03938c7212018c720b019399720e8c72120299720e9c7215720d93b27211730b00720ced938" +
  "c7216018cb27205730c0001927e8c721602069d9c9c7e9de4c6720405057e721305067e720d" +
  "067e999d720e720d7215067e720606958f7207730d93b2db6308b2a4730e00730f008602720" +
  "973107311"

export function stakingBundleTemplateHash(): HexString {
  const template = RustModule.SigmaRust.ErgoTree.from_base16_bytes(StakingBundleSample).template_bytes()
  return crypto.SHA256(crypto.enc.Hex.parse(toHex(template))).toString(crypto.enc.Hex)
}
