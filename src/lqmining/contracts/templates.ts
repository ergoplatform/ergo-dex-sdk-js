import {ErgoTreeTemplate, HexString, RustModule} from "@ergolabs/ergo-sdk"
import * as crypto from "crypto-js"
import {toHex} from "../../utils/hex"

export const StakingBundleSample: ErgoTreeTemplate =
  "d80ed601b2a5730000d602db63087201d603e4c6a7050ed604b2a4730100d605db63087204d" +
  "6068cb2720573020002d607998cb27202730300027206d608e4c6a7040ed609db6308a7d60a" +
  "8cb2720973040001d60bb27209730500d60cb27209730600d60d8c720c02d60e8c720b02d1e" +
  "d938cb27202730700017203959372077308d808d60fb2a5e4e3000400d610b2a5e4e3010400" +
  "d611db63087210d612b27211730900d613b2e4c672040410730a00d614c672010804d6157e9" +
  "9721395e67214e47214e4c67201070405d616b2db6308720f730b00eded93c2720f7208eded" +
  "ededed93e4c67210040e720893e4c67210050e7203938602720a730cb27211730d00938c721" +
  "2018c720b019399720e8c72120299720e9c7215720d93b27211730e00720ced938c7216018c" +
  "b27205730f0001927e8c721602069d9c9c7e9de4c6720405057e721305067e720d067e999d7" +
  "20e720d7215067e720606958f7207731093b2db6308b2a47311007312008602720a73137314";

export function stakingBundleTemplateHash(): HexString {
  const template = RustModule.SigmaRust.ErgoTree.from_base16_bytes(StakingBundleSample).template_bytes()
  return crypto.SHA256(crypto.enc.Hex.parse(toHex(template))).toString(crypto.enc.Hex)
}
